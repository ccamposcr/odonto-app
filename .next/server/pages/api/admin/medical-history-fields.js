"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/admin/medical-history-fields";
exports.ids = ["pages/api/admin/medical-history-fields"];
exports.modules = {

/***/ "better-sqlite3":
/*!*********************************!*\
  !*** external "better-sqlite3" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("better-sqlite3");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fmedical-history-fields&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fmedical-history-fields.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fmedical-history-fields&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fmedical-history-fields.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_admin_medical_history_fields_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/admin/medical-history-fields.js */ \"(api)/./pages/api/admin/medical-history-fields.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_medical_history_fields_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_medical_history_fields_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/admin/medical-history-fields\",\n        pathname: \"/api/admin/medical-history-fields\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_admin_medical_history_fields_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFkbWluJTJGbWVkaWNhbC1oaXN0b3J5LWZpZWxkcyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGYWRtaW4lMkZtZWRpY2FsLWhpc3RvcnktZmllbGRzLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3dFO0FBQ3hFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx1RUFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsdUVBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2RvbnRvLWFwcC8/NmViMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL2FkbWluL21lZGljYWwtaGlzdG9yeS1maWVsZHMuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hZG1pbi9tZWRpY2FsLWhpc3RvcnktZmllbGRzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWRtaW4vbWVkaWNhbC1oaXN0b3J5LWZpZWxkc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fmedical-history-fields&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fmedical-history-fields.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/admin/medical-history-fields.js":
/*!***************************************************!*\
  !*** ./pages/api/admin/medical-history-fields.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(better_sqlite3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst dbPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"expedientes.db\");\nfunction handler(req, res) {\n    const db = new (better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default())(dbPath);\n    try {\n        if (req.method === \"GET\") {\n            // Get all medical history fields\n            const fields = db.prepare(`\n        SELECT * FROM medical_history_fields \n        ORDER BY display_order ASC, field_label ASC\n      `).all();\n            res.status(200).json(fields);\n        } else if (req.method === \"POST\") {\n            // Create new medical history field\n            let { field_key, field_label, field_type = \"boolean\", is_active = true, display_order = 0 } = req.body;\n            // Convert boolean to integer for SQLite\n            is_active = is_active ? 1 : 0;\n            if (!field_label) {\n                return res.status(400).json({\n                    error: \"field_label is required\"\n                });\n            }\n            // Generate field_key if not provided\n            if (!field_key) {\n                let baseKey = field_label.toLowerCase().replace(/[^a-z0-9]/g, \"_\").replace(/_+/g, \"_\").replace(/^_|_$/g, \"\");\n                field_key = baseKey;\n                let counter = 1;\n                // Ensure field_key is unique\n                while(db.prepare(\"SELECT id FROM medical_history_fields WHERE field_key = ?\").get(field_key)){\n                    field_key = `${baseKey}_${counter}`;\n                    counter++;\n                }\n            } else {\n                // Check if provided field_key already exists\n                const existing = db.prepare(\"SELECT id FROM medical_history_fields WHERE field_key = ?\").get(field_key);\n                if (existing) {\n                    return res.status(409).json({\n                        error: \"Field key already exists\"\n                    });\n                }\n            }\n            try {\n                // Begin transaction to ensure atomicity\n                const insertTransaction = db.transaction(()=>{\n                    // If display_order is 1 (new field at top), increment all existing fields\n                    if (display_order === 1) {\n                        db.prepare(`\n              UPDATE medical_history_fields \n              SET display_order = display_order + 1 \n              WHERE display_order >= 1\n            `).run();\n                    }\n                    const result = db.prepare(`\n            INSERT INTO medical_history_fields (field_key, field_label, field_type, is_active, display_order)\n            VALUES (?, ?, ?, ?, ?)\n          `).run(field_key, field_label, field_type, is_active, display_order);\n                    return result;\n                });\n                const result = insertTransaction();\n                const newField = db.prepare(\"SELECT * FROM medical_history_fields WHERE id = ?\").get(result.lastInsertRowid);\n                res.status(201).json(newField);\n            } catch (insertError) {\n                console.error(\"Insert error:\", insertError);\n                return res.status(500).json({\n                    error: \"Error creating field: \" + insertError.message\n                });\n            }\n        } else if (req.method === \"PUT\") {\n            // Update medical history field\n            let { id, field_label, field_type, is_active, display_order } = req.body;\n            // Convert boolean to integer for SQLite if provided\n            if (typeof is_active === \"boolean\") {\n                is_active = is_active ? 1 : 0;\n            }\n            if (!id) {\n                return res.status(400).json({\n                    error: \"id is required\"\n                });\n            }\n            const result = db.prepare(`\n        UPDATE medical_history_fields \n        SET field_label = COALESCE(?, field_label),\n            field_type = COALESCE(?, field_type),\n            is_active = COALESCE(?, is_active),\n            display_order = COALESCE(?, display_order)\n        WHERE id = ?\n      `).run(field_label, field_type, is_active, display_order, id);\n            if (result.changes === 0) {\n                return res.status(404).json({\n                    error: \"Field not found\"\n                });\n            }\n            const updatedField = db.prepare(\"SELECT * FROM medical_history_fields WHERE id = ?\").get(id);\n            res.status(200).json(updatedField);\n        } else if (req.method === \"DELETE\") {\n            // Delete medical history field\n            const { id } = req.query;\n            if (!id) {\n                return res.status(400).json({\n                    error: \"id is required\"\n                });\n            }\n            const result = db.prepare(\"DELETE FROM medical_history_fields WHERE id = ?\").run(id);\n            if (result.changes === 0) {\n                return res.status(404).json({\n                    error: \"Field not found\"\n                });\n            }\n            res.status(200).json({\n                message: \"Field deleted successfully\"\n            });\n        } else {\n            res.setHeader(\"Allow\", [\n                \"GET\",\n                \"POST\",\n                \"PUT\",\n                \"DELETE\"\n            ]);\n            res.status(405).json({\n                error: `Method ${req.method} not allowed`\n            });\n        }\n    } catch (error) {\n        console.error(\"Database error:\", error);\n        res.status(500).json({\n            error: \"Internal server error\"\n        });\n    } finally{\n        db.close();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYWRtaW4vbWVkaWNhbC1oaXN0b3J5LWZpZWxkcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFzQztBQUNkO0FBRXhCLE1BQU1FLFNBQVNELGdEQUFTLENBQUNHLFFBQVFDLEdBQUcsSUFBSTtBQUV6QixTQUFTQyxRQUFRQyxHQUFHLEVBQUVDLEdBQUc7SUFDdEMsTUFBTUMsS0FBSyxJQUFJVCx1REFBUUEsQ0FBQ0U7SUFFeEIsSUFBSTtRQUNGLElBQUlLLElBQUlHLE1BQU0sS0FBSyxPQUFPO1lBQ3hCLGlDQUFpQztZQUNqQyxNQUFNQyxTQUFTRixHQUFHRyxPQUFPLENBQUMsQ0FBQzs7O01BRzNCLENBQUMsRUFBRUMsR0FBRztZQUVOTCxJQUFJTSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDSjtRQUV2QixPQUFPLElBQUlKLElBQUlHLE1BQU0sS0FBSyxRQUFRO1lBQ2hDLG1DQUFtQztZQUNuQyxJQUFJLEVBQUVNLFNBQVMsRUFBRUMsV0FBVyxFQUFFQyxhQUFhLFNBQVMsRUFBRUMsWUFBWSxJQUFJLEVBQUVDLGdCQUFnQixDQUFDLEVBQUUsR0FBR2IsSUFBSWMsSUFBSTtZQUV0Ryx3Q0FBd0M7WUFDeENGLFlBQVlBLFlBQVksSUFBSTtZQUU1QixJQUFJLENBQUNGLGFBQWE7Z0JBQ2hCLE9BQU9ULElBQUlNLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVPLE9BQU87Z0JBQTBCO1lBQ2pFO1lBRUEscUNBQXFDO1lBQ3JDLElBQUksQ0FBQ04sV0FBVztnQkFDZCxJQUFJTyxVQUFVTixZQUNYTyxXQUFXLEdBQ1hDLE9BQU8sQ0FBQyxjQUFjLEtBQ3RCQSxPQUFPLENBQUMsT0FBTyxLQUNmQSxPQUFPLENBQUMsVUFBVTtnQkFFckJULFlBQVlPO2dCQUNaLElBQUlHLFVBQVU7Z0JBRWQsNkJBQTZCO2dCQUM3QixNQUFPakIsR0FBR0csT0FBTyxDQUFDLDZEQUE2RGUsR0FBRyxDQUFDWCxXQUFZO29CQUM3RkEsWUFBWSxD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QUFTLENBQUMsU0FBUztnQkFBQztnQkFBTztnQkFBUTtnQkFBTzthQUFTO1lBQ3ZEbEMsSUFBSU0sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRU8sT0FBTyxDQUFDLE9BQU8sRUFBRWYsSUFBSUcsTUFBTSxDQUFDLFlBQVksQ0FBQztZQUFDO1FBQ25FO0lBQ0YsRUFBRSxPQUFPWSxPQUFPO1FBQ2RjLFFBQVFkLEtBQUssQ0FBQyxtQkFBbUJBO1FBQ2pDZCxJQUFJTSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVPLE9BQU87UUFBd0I7SUFDeEQsU0FBVTtRQUNSYixHQUFHa0MsS0FBSztJQUNWO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vZG9udG8tYXBwLy4vcGFnZXMvYXBpL2FkbWluL21lZGljYWwtaGlzdG9yeS1maWVsZHMuanM/M2QzYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRGF0YWJhc2UgZnJvbSAnYmV0dGVyLXNxbGl0ZTMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbmNvbnN0IGRiUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnZXhwZWRpZW50ZXMuZGInKTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICBjb25zdCBkYiA9IG5ldyBEYXRhYmFzZShkYlBhdGgpO1xuXG4gIHRyeSB7XG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XG4gICAgICAvLyBHZXQgYWxsIG1lZGljYWwgaGlzdG9yeSBmaWVsZHNcbiAgICAgIGNvbnN0IGZpZWxkcyA9IGRiLnByZXBhcmUoYFxuICAgICAgICBTRUxFQ1QgKiBGUk9NIG1lZGljYWxfaGlzdG9yeV9maWVsZHMgXG4gICAgICAgIE9SREVSIEJZIGRpc3BsYXlfb3JkZXIgQVNDLCBmaWVsZF9sYWJlbCBBU0NcbiAgICAgIGApLmFsbCgpO1xuXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihmaWVsZHMpO1xuXG4gICAgfSBlbHNlIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgIC8vIENyZWF0ZSBuZXcgbWVkaWNhbCBoaXN0b3J5IGZpZWxkXG4gICAgICBsZXQgeyBmaWVsZF9rZXksIGZpZWxkX2xhYmVsLCBmaWVsZF90eXBlID0gJ2Jvb2xlYW4nLCBpc19hY3RpdmUgPSB0cnVlLCBkaXNwbGF5X29yZGVyID0gMCB9ID0gcmVxLmJvZHk7XG4gICAgICBcbiAgICAgIC8vIENvbnZlcnQgYm9vbGVhbiB0byBpbnRlZ2VyIGZvciBTUUxpdGVcbiAgICAgIGlzX2FjdGl2ZSA9IGlzX2FjdGl2ZSA/IDEgOiAwO1xuXG4gICAgICBpZiAoIWZpZWxkX2xhYmVsKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnZmllbGRfbGFiZWwgaXMgcmVxdWlyZWQnIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBHZW5lcmF0ZSBmaWVsZF9rZXkgaWYgbm90IHByb3ZpZGVkXG4gICAgICBpZiAoIWZpZWxkX2tleSkge1xuICAgICAgICBsZXQgYmFzZUtleSA9IGZpZWxkX2xhYmVsXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAucmVwbGFjZSgvW15hLXowLTldL2csICdfJylcbiAgICAgICAgICAucmVwbGFjZSgvXysvZywgJ18nKVxuICAgICAgICAgIC5yZXBsYWNlKC9eX3xfJC9nLCAnJyk7XG4gICAgICAgIFxuICAgICAgICBmaWVsZF9rZXkgPSBiYXNlS2V5O1xuICAgICAgICBsZXQgY291bnRlciA9IDE7XG4gICAgICAgIFxuICAgICAgICAvLyBFbnN1cmUgZmllbGRfa2V5IGlzIHVuaXF1ZVxuICAgICAgICB3aGlsZSAoZGIucHJlcGFyZSgnU0VMRUNUIGlkIEZST00gbWVkaWNhbF9oaXN0b3J5X2ZpZWxkcyBXSEVSRSBmaWVsZF9rZXkgPSA/JykuZ2V0KGZpZWxkX2tleSkpIHtcbiAgICAgICAgICBmaWVsZF9rZXkgPSBgJHtiYXNlS2V5fV8ke2NvdW50ZXJ9YDtcbiAgICAgICAgICBjb3VudGVyKys7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHByb3ZpZGVkIGZpZWxkX2tleSBhbHJlYWR5IGV4aXN0c1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IGRiLnByZXBhcmUoJ1NFTEVDVCBpZCBGUk9NIG1lZGljYWxfaGlzdG9yeV9maWVsZHMgV0hFUkUgZmllbGRfa2V5ID0gPycpLmdldChmaWVsZF9rZXkpO1xuICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oeyBlcnJvcjogJ0ZpZWxkIGtleSBhbHJlYWR5IGV4aXN0cycgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQmVnaW4gdHJhbnNhY3Rpb24gdG8gZW5zdXJlIGF0b21pY2l0eVxuICAgICAgICBjb25zdCBpbnNlcnRUcmFuc2FjdGlvbiA9IGRiLnRyYW5zYWN0aW9uKCgpID0+IHtcbiAgICAgICAgICAvLyBJZiBkaXNwbGF5X29yZGVyIGlzIDEgKG5ldyBmaWVsZCBhdCB0b3ApLCBpbmNyZW1lbnQgYWxsIGV4aXN0aW5nIGZpZWxkc1xuICAgICAgICAgIGlmIChkaXNwbGF5X29yZGVyID09PSAxKSB7XG4gICAgICAgICAgICBkYi5wcmVwYXJlKGBcbiAgICAgICAgICAgICAgVVBEQVRFIG1lZGljYWxfaGlzdG9yeV9maWVsZHMgXG4gICAgICAgICAgICAgIFNFVCBkaXNwbGF5X29yZGVyID0gZGlzcGxheV9vcmRlciArIDEgXG4gICAgICAgICAgICAgIFdIRVJFIGRpc3BsYXlfb3JkZXIgPj0gMVxuICAgICAgICAgICAgYCkucnVuKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gZGIucHJlcGFyZShgXG4gICAgICAgICAgICBJTlNFUlQgSU5UTyBtZWRpY2FsX2hpc3RvcnlfZmllbGRzIChmaWVsZF9rZXksIGZpZWxkX2xhYmVsLCBmaWVsZF90eXBlLCBpc19hY3RpdmUsIGRpc3BsYXlfb3JkZXIpXG4gICAgICAgICAgICBWQUxVRVMgKD8sID8sID8sID8sID8pXG4gICAgICAgICAgYCkucnVuKGZpZWxkX2tleSwgZmllbGRfbGFiZWwsIGZpZWxkX3R5cGUsIGlzX2FjdGl2ZSwgZGlzcGxheV9vcmRlcik7XG5cbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSBpbnNlcnRUcmFuc2FjdGlvbigpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbmV3RmllbGQgPSBkYi5wcmVwYXJlKCdTRUxFQ1QgKiBGUk9NIG1lZGljYWxfaGlzdG9yeV9maWVsZHMgV0hFUkUgaWQgPSA/JykuZ2V0KHJlc3VsdC5sYXN0SW5zZXJ0Um93aWQpO1xuICAgICAgICBcbiAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24obmV3RmllbGQpO1xuICAgICAgfSBjYXRjaCAoaW5zZXJ0RXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignSW5zZXJ0IGVycm9yOicsIGluc2VydEVycm9yKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdFcnJvciBjcmVhdGluZyBmaWVsZDogJyArIGluc2VydEVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKHJlcS5tZXRob2QgPT09ICdQVVQnKSB7XG4gICAgICAvLyBVcGRhdGUgbWVkaWNhbCBoaXN0b3J5IGZpZWxkXG4gICAgICBsZXQgeyBpZCwgZmllbGRfbGFiZWwsIGZpZWxkX3R5cGUsIGlzX2FjdGl2ZSwgZGlzcGxheV9vcmRlciB9ID0gcmVxLmJvZHk7XG4gICAgICBcbiAgICAgIC8vIENvbnZlcnQgYm9vbGVhbiB0byBpbnRlZ2VyIGZvciBTUUxpdGUgaWYgcHJvdmlkZWRcbiAgICAgIGlmICh0eXBlb2YgaXNfYWN0aXZlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgaXNfYWN0aXZlID0gaXNfYWN0aXZlID8gMSA6IDA7XG4gICAgICB9XG5cbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdpZCBpcyByZXF1aXJlZCcgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGRiLnByZXBhcmUoYFxuICAgICAgICBVUERBVEUgbWVkaWNhbF9oaXN0b3J5X2ZpZWxkcyBcbiAgICAgICAgU0VUIGZpZWxkX2xhYmVsID0gQ09BTEVTQ0UoPywgZmllbGRfbGFiZWwpLFxuICAgICAgICAgICAgZmllbGRfdHlwZSA9IENPQUxFU0NFKD8sIGZpZWxkX3R5cGUpLFxuICAgICAgICAgICAgaXNfYWN0aXZlID0gQ09BTEVTQ0UoPywgaXNfYWN0aXZlKSxcbiAgICAgICAgICAgIGRpc3BsYXlfb3JkZXIgPSBDT0FMRVNDRSg/LCBkaXNwbGF5X29yZGVyKVxuICAgICAgICBXSEVSRSBpZCA9ID9cbiAgICAgIGApLnJ1bihmaWVsZF9sYWJlbCwgZmllbGRfdHlwZSwgaXNfYWN0aXZlLCBkaXNwbGF5X29yZGVyLCBpZCk7XG5cbiAgICAgIGlmIChyZXN1bHQuY2hhbmdlcyA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ0ZpZWxkIG5vdCBmb3VuZCcgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVwZGF0ZWRGaWVsZCA9IGRiLnByZXBhcmUoJ1NFTEVDVCAqIEZST00gbWVkaWNhbF9oaXN0b3J5X2ZpZWxkcyBXSEVSRSBpZCA9ID8nKS5nZXQoaWQpO1xuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24odXBkYXRlZEZpZWxkKTtcblxuICAgIH0gZWxzZSBpZiAocmVxLm1ldGhvZCA9PT0gJ0RFTEVURScpIHtcbiAgICAgIC8vIERlbGV0ZSBtZWRpY2FsIGhpc3RvcnkgZmllbGRcbiAgICAgIGNvbnN0IHsgaWQgfSA9IHJlcS5xdWVyeTtcblxuICAgICAgaWYgKCFpZCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ2lkIGlzIHJlcXVpcmVkJyB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gZGIucHJlcGFyZSgnREVMRVRFIEZST00gbWVkaWNhbF9oaXN0b3J5X2ZpZWxkcyBXSEVSRSBpZCA9ID8nKS5ydW4oaWQpO1xuXG4gICAgICBpZiAocmVzdWx0LmNoYW5nZXMgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdGaWVsZCBub3QgZm91bmQnIH0pO1xuICAgICAgfVxuXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdGaWVsZCBkZWxldGVkIHN1Y2Nlc3NmdWxseScgfSk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLnNldEhlYWRlcignQWxsb3cnLCBbJ0dFVCcsICdQT1NUJywgJ1BVVCcsICdERUxFVEUnXSk7XG4gICAgICByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiBgTWV0aG9kICR7cmVxLm1ldGhvZH0gbm90IGFsbG93ZWRgIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBlcnJvcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gIH0gZmluYWxseSB7XG4gICAgZGIuY2xvc2UoKTtcbiAgfVxufSJdLCJuYW1lcyI6WyJEYXRhYmFzZSIsInBhdGgiLCJkYlBhdGgiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJkYiIsIm1ldGhvZCIsImZpZWxkcyIsInByZXBhcmUiLCJhbGwiLCJzdGF0dXMiLCJqc29uIiwiZmllbGRfa2V5IiwiZmllbGRfbGFiZWwiLCJmaWVsZF90eXBlIiwiaXNfYWN0aXZlIiwiZGlzcGxheV9vcmRlciIsImJvZHkiLCJlcnJvciIsImJhc2VLZXkiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJjb3VudGVyIiwiZ2V0IiwiZXhpc3RpbmciLCJpbnNlcnRUcmFuc2FjdGlvbiIsInRyYW5zYWN0aW9uIiwicnVuIiwicmVzdWx0IiwibmV3RmllbGQiLCJsYXN0SW5zZXJ0Um93aWQiLCJpbnNlcnRFcnJvciIsImNvbnNvbGUiLCJtZXNzYWdlIiwiaWQiLCJjaGFuZ2VzIiwidXBkYXRlZEZpZWxkIiwicXVlcnkiLCJzZXRIZWFkZXIiLCJjbG9zZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/admin/medical-history-fields.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fmedical-history-fields&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fadmin%2Fmedical-history-fields.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();